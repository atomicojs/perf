var $=class{#t;#e=new Set;constructor(t){this.#t=t}get current(){return this.#t}set current(t){this.#t!=t&&(this.#t=t,this.#e.forEach(r=>r(t)))}on(t){return this.#e.add(t),()=>this.#e.delete(t)}},v=e=>new $(e);var Y=Symbol.for("atomico.hooks");globalThis[Y]=globalThis[Y]||{};var O=globalThis[Y],nt=Symbol.for("Atomico.suspense"),q=Symbol.for("Atomico.effect"),z=Symbol.for("Atomico.layoutEffect"),G=Symbol.for("Atomico.insertionEffect"),y=(e,t,r)=>{let{i:o,hooks:s}=O.c,n=s[o]=s[o]||{};return n.value=e(n.value),n.effect=t,n.tag=r,O.c.i++,s[o].value},J=e=>y((t=v(e))=>t),P=()=>y((e=v(O.c.host))=>e);var it=(e,t,r=0)=>{let o={},s=!1,n=()=>s,f=(l,c)=>{for(let p in o){let i=o[p];i.effect&&i.tag===l&&(i.value=i.effect(i.value,c))}};return{load:l=>{O.c={host:t,hooks:o,update:e,i:0,id:r};let c;try{s=!1,c=l()}catch(p){if(p!==nt)throw p;s=!0}finally{O.c=null}return c},cleanEffects:l=>(f(G,l),()=>(f(z,l),()=>{f(q,l)})),isSuspense:n}};var C=Symbol.for;function X(e,t){let r=e.length;if(r!==t.length)return!1;for(let o=0;o<r;o++){let s=e[o],n=t[o];if(s!==n)return!1}return!0}var E=e=>typeof e=="function",N=e=>typeof e=="object",{isArray:ct}=Array,_=(e,t)=>(t?e instanceof HTMLStyleElement:!0)&&"hydrate"in(e?.dataset||{});function D(e,t){let r,o=s=>{let{length:n}=s;for(let f=0;f<n;f++){let a=s[f];if(a&&Array.isArray(a))o(a);else{let u=typeof a;if(a==null||u==="function"||u==="boolean")continue;u==="string"||u==="number"?(r==null&&(r=""),r+=a):(r!=null&&(t(r),r=null),t(a))}}};o(e),r!=null&&t(r)}var M=(e,t,r)=>(e.addEventListener(t,r),()=>e.removeEventListener(t,r));var j=class{constructor(t,r,o){this.message=r,this.target=t,this.value=o}},A=class extends j{},w=class extends j{};var H="Custom",ft=null,St={true:1,"":1,1:1};function lt(e,t,r,o,s){let{type:n,reflect:f,event:a,value:u,attr:l=gt(t)}=r?.name!=H&&N(r)&&r!=ft?r:{type:r},c=n?.name===H&&n.map,p=u!=null?n==Function||!E(u)?()=>u:u:null;Object.defineProperty(e,t,{configurable:!0,set(i){let m=this[t];p&&n!=Boolean&&i==null&&(i=p());let{error:x,value:b}=(c?Ct:Nt)(n,i);if(x&&b!=null)throw new A(this,`The value defined for prop '${t}' must be of type '${n.name}'`,b);m!=b&&(this._props[t]=b??void 0,this.update(),a&&ut(this,a),this.updated.then(()=>{f&&(this._ignoreAttr=l,Pt(this,n,l,this[t]),this._ignoreAttr=null)}))},get(){return this._props[t]}}),p&&(s[t]=p()),o[l]={prop:t,type:n}}var ut=(e,{type:t,base:r=CustomEvent,...o})=>e.dispatchEvent(new r(t,o)),gt=e=>e.replace(/([A-Z])/g,"-$1").toLowerCase(),Pt=(e,t,r,o)=>o==null||t==Boolean&&!o?e.removeAttribute(r):e.setAttribute(r,t?.name===H&&t?.serialize?t?.serialize(o):N(o)?JSON.stringify(o):t==Boolean?"":o),pt=(e,t)=>e==Boolean?!!St[t]:e==Number?Number(t):e==String?t:e==Array||e==Object?JSON.parse(t):e.name==H?t:new e(t),Ct=({map:e},t)=>{try{return{value:e(t),error:!1}}catch{return{value:t,error:!0}}},Nt=(e,t)=>e==null||t==null?{value:t,error:!1}:e!=String&&t===""?{value:void 0,error:!1}:e==Object||e==Array||e==Symbol?{value:t,error:{}.toString.call(t)!==`[object ${e.name}]`}:t instanceof e?{value:t,error:e==Number&&Number.isNaN(t.valueOf())}:e==String||e==Number||e==Boolean?{value:t,error:e==Number?typeof t!="number"?!0:Number.isNaN(t):e==String?typeof t!="string":typeof t!="boolean"}:{value:t,error:!0};var At=0,Tt=e=>{let t=(e?.dataset||{})?.hydrate||"";return t||"c"+At++},k=(e,t=HTMLElement)=>{let r={},o={},s="prototype"in t&&t.prototype instanceof Element,n=s?t:"base"in t?t.base:HTMLElement,{props:f,styles:a}=s?e:t;class u extends n{constructor(){super(),this._setup(),this._render=()=>e({...this._props});for(let c in o)this[c]=o[c]}static get styles(){return[super.styles,a]}async _setup(){if(this._props)return;this._props={};let c,p;this.mounted=new Promise(h=>this.mount=()=>{h(),c!=this.parentNode&&(p!=c?this.unmounted.then(this.update):this.update()),c=this.parentNode}),this.unmounted=new Promise(h=>this.unmount=()=>{h(),(c!=this.parentNode||!this.isConnected)&&(i.cleanEffects(!0)()(),p=this.parentNode,c=null)}),this.symbolId=this.symbolId||Symbol(),this.symbolIdParent=Symbol();let i=it(()=>this.update(),this,Tt(this)),m,x=!0,b=_(this);this.update=()=>(m||(m=!0,this.updated=(this.updated||this.mounted).then(()=>{try{let h=i.load(this._render),d=i.cleanEffects();return h&&h.render(this,this.symbolId,b),m=!1,x&&!i.isSuspense()&&(x=!1,!b&&Ot(this)),d()}finally{m=!1}}).then(h=>{h&&h()})),this.updated),this.update()}connectedCallback(){this.mount(),super.connectedCallback&&super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),this.unmount()}attributeChangedCallback(c,p,i){if(r[c]){if(c===this._ignoreAttr||p===i)return;let{prop:m,type:x}=r[c];try{this[m]=pt(x,i)}catch{throw new w(this,`The value defined as attr '${c}' cannot be parsed by type '${x.name}'`,i)}}else super.attributeChangedCallback(c,p,i)}static get props(){return{...super.props,...f}}static get observedAttributes(){let c=super.observedAttributes||[];for(let p in f)lt(this.prototype,p,f[p],r,o);return Object.keys(r).concat(c)}}return u};function Ot(e){let{styles:t}=e.constructor,{shadowRoot:r}=e;if(r&&t.length){let o=[];D(t,s=>{s&&(s instanceof Element?r.appendChild(s.cloneNode(!0)):o.push(s))}),o.length&&(r.adoptedStyleSheets=o)}}var K=e=>(t,r)=>{y(([o,s]=[])=>((s||!s)&&(s&&X(s,r)?o=o||!0:(E(o)&&o(),o=null)),[o,r]),([o,s],n)=>n?(E(o)&&o(),[]):[o||t(),s],e)},_t=K(z),W=K(q),Z=K(G);var I=class extends Array{constructor(t,r){let o=!0,s=n=>{try{r(n,this,o)}finally{o=!1}};super(void 0,s,r),s(t)}};var at=e=>{let{current:t}=P();if(!(e in t))throw new A(t,`For useProp("${e}"), the prop does not exist on the host.`,e);return y((r=new I(t[e],(o,s)=>{o=E(o)?o(t[e]):o,t[e]=o}))=>(r[0]=t[e],r))};var Q=C("atomico/options");globalThis[Q]=globalThis[Q]||{sheet:!!document.adoptedStyleSheets};var S=globalThis[Q];var It=new Promise(e=>{S.ssr||(document.readyState==="loading"?M(document,"DOMContentLoaded",e):e())});var Rt={checked:1,value:1,selected:1},Lt={list:1,type:1,size:1,form:1,width:1,height:1,src:1,href:1,slot:1},Dt={shadowDom:1,staticNode:1,cloneNode:1,children:1,key:1},F={},tt=[],T=class extends Text{},Mt=C("atomico/id"),R=C("atomico/type"),V=C("atomico/ref"),Et=C("atomico/vnode"),et=()=>{};function jt(e,t,r){return B(this,e,t,r)}var g=(e,t,...r)=>{let o=t||F,{children:s}=o;if(s=s??(r.length?r:tt),e===et)return s;let n=e?e instanceof Node?1:e.prototype instanceof HTMLElement&&2:0;if(n===!1&&e instanceof Function)return e(s!=tt?{children:s,...o}:o);let f=S.render||jt;return{[R]:Et,type:e,props:o,children:s,key:o.key,shadow:o.shadowDom,static:o.staticNode,raw:n,is:o.is,clone:o.cloneNode,render:f}};function B(e,t,r=Mt,o,s){let n;if(t&&t[r]&&t[r].vnode==e||e[R]!=Et)return t;(e||!t)&&(s=s||e.type=="svg",n=e.type!="host"&&(e.raw==1?(t&&e.clone?t[V]:t)!=e.type:e.raw==2?!(t instanceof e.type):t?t[V]||t.localName!=e.type:!t),n&&e.type!=null&&(e.raw==1&&e.clone?(o=!0,t=e.type.cloneNode(!0),t[V]=e.type):t=e.raw==1?e.type:e.raw==2?new e.type:s?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type,e.is?{is:e.is}:void 0)));let f=t[r]?t[r]:F,{vnode:a=F,cycle:u=0}=f,{fragment:l,handlers:c}=f,{children:p=tt,props:i=F}=a;if(c=n?{}:c||{},e.static&&!n)return t;if(e.shadow&&!t.shadowRoot&&t.attachShadow({mode:"open",...e.shadow}),e.props!=i&&kt(t,i,e.props,c,s),e.children!==p){let m=e.shadow?t.shadowRoot:t;l=Ht(e.children,l,m,r,!u&&o,s&&e.type=="foreignObject"?!1:s)}return t[r]={vnode:e,handlers:c,fragment:l,cycle:u+1},t}function wt(e,t){let r=new T(""),o=new T(""),s;if(e[t?"prepend":"append"](r),t){let{lastElementChild:n}=e;for(;n;){let{previousElementSibling:f}=n;if(_(n,!0)&&!_(f,!0)){s=n;break}n=f}}return s?s.before(o):e.append(o),{markStart:r,markEnd:o}}function Ht(e,t,r,o,s,n){e=e==null?null:ct(e)?e:[e];let f=t||wt(r,s),{markStart:a,markEnd:u,keyes:l}=f,c,p=l&&new Set,i=a;if(e&&D(e,m=>{if(typeof m=="object"&&!m[R])return;let x=m[R]&&m.key,b=l&&x!=null&&l.get(x);i!=u&&i===b?p.delete(i):i=i==u?u:i.nextSibling;let h=l?b:i,d=h;if(m[R])d=B(m,h,o,s,n);else{let U=m+"";!(d instanceof Text)||d instanceof T?d=new Text(U):d.data!=U&&(d.data=U)}d!=i&&(l&&p.delete(d),!h||l?(r.insertBefore(d,i),l&&i!=u&&p.add(i)):h==u?r.insertBefore(d,u):(r.replaceChild(d,h),i=d)),x!=null&&(c=c||new Map,c.set(x,d))}),i=i==u?u:i.nextSibling,t&&i!=u)for(;i!=u;){let m=i;i=i.nextSibling,m.remove()}return p&&p.forEach(m=>m.remove()),f.keyes=c,f}function kt(e,t,r,o,s){for(let n in t)!(n in r)&&ht(e,n,t[n],null,s,o);for(let n in r)ht(e,n,t[n],r[n],s,o)}function ht(e,t,r,o,s,n){if(t=t=="class"&&!s?"className":t,r=r??null,o=o??null,t in e&&Rt[t]&&(r=e[t]),!(o===r||Dt[t]||t[0]=="_"))if(e.localName==="slot"&&t==="assignNode"&&"assign"in e)e.assign(o);else if(t[0]=="o"&&t[1]=="n"&&(E(o)||E(r)))Ft(e,t.slice(2),o,n);else if(t=="ref")o&&(E(o)?o(e):o.current=e);else if(t=="style"){let{style:f}=e;r=r||"",o=o||"";let a=N(r),u=N(o);if(a)for(let l in r)if(u)!(l in o)&&dt(f,l,null);else break;if(u)for(let l in o){let c=o[l];a&&r[l]===c||dt(f,l,c)}else f.cssText=o}else{let f=t[0]=="$"?t.slice(1):t;f===t&&(!s&&!Lt[t]&&t in e||E(o)||E(r))?e[t]=o??"":o==null?e.removeAttribute(f):e.setAttribute(f,N(o)?JSON.stringify(o):o)}}function Ft(e,t,r,o){if(o.handleEvent||(o.handleEvent=s=>o[s.type].call(e,s)),r){if(!o[t]){let s=r.capture||r.once||r.passive?Object.assign({},r):null;e.addEventListener(t,o,s)}o[t]=r}else o[t]&&(e.removeEventListener(t,o),delete o[t])}function dt(e,t,r){let o="setProperty";r==null&&(o="removeProperty",r=null),~t.indexOf("-")?e[o](t,r):e[t]=r}var Bt=g("host",{style:"display: contents"}),Ut="value",ot=(e,t)=>{let r=P(),o=J();Z(()=>M(r.current,"ConnectContext",s=>{s.composedPath().at(0)!==s.currentTarget&&e===s.detail.id&&(s.stopPropagation(),s.detail.connect(o))}),[e]),o.current=t};var rt=e=>{let t=k(({value:r})=>(ot(t,r),Bt),{props:{value:{type:Object,value:()=>e}}});return t[Ut]=e,t};var vt=rt({dispatch(e,t){}});var bt={};function st(e,...t){let r=(e.raw||e).reduce((o,s,n)=>o+s+(t[n]||""),"");return bt[r]=bt[r]||zt(r)}function zt(e){if(S.sheet){let t=new CSSStyleSheet;return t.replaceSync(e),t}else{let t=document.createElement("style");return t.textContent=e,t}}var L=(e,t,r)=>(t==null?t={key:r}:t.key=r,g(e,t)),yt=L;var Gt=k(()=>{let[e,t]=at("count");return yt("host",{shadowDom:!0,children:[L("button",{onclick:()=>t(e-1),children:"-"}),L("span",{children:e}),L("button",{onclick:()=>t(e+1),children:"+"})]})},{props:{count:{type:Number,value:0}},styles:st`*{font-size:200%}span{width:4rem;display:inline-block;text-align:center}button{width:4rem;height:4rem;border:none;border-radius:10px;background-color:#2e8b57;color:#fff}`});customElements.define("my-counter",Gt);
